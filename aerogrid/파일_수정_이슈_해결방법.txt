# 파일이 비어지거나 원래대로 돌아가는 이슈 해결방법

## 🔍 문제 발생 원인

### 1. AI 모델의 파일 수정 한계
- edit_file 도구 사용 시 파일의 일부분만 수정하려고 하는데
- AI 모델이 전체 파일을 잘못 해석해서 일부만 남기고 나머지를 삭제하는 경우가 있음

### 2. 백업 복구 과정
- 파일이 비어지면 test-fixed 백업 폴더에서 복구해야 하는데
- 이 과정에서 원본 파일이 백업 파일로 덮어써지는 경우가 있음

### 3. 수정 범위 문제
- search_replace 도구를 사용할 때 정확한 문자열을 찾지 못하면
- 수정이 제대로 적용되지 않거나 파일이 손상될 수 있음

## 🛡️ 해결 방법

### 1. 더 안전한 수정 방식 사용
- 작은 수정은 search_replace 사용
- 큰 수정은 백업 후 전체 파일 교체

### 2. 수정 전 백업 생성
- 중요한 수정 전에 항상 백업 생성
- 명령어: cp test/script.js test/backup-$(date +%Y%m%d-%H%M%S).js

### 3. 수정 후 검증
- 수정 후 파일 내용 확인
- 문제 발생 시 즉시 백업에서 복구

## 📝 권장 작업 순서

1. 수정 전 현재 파일 백업
2. 작은 수정은 search_replace 사용
3. 큰 수정은 백업 후 전체 교체
4. 수정 후 파일 내용 검증
5. 문제 발생 시 백업에서 복구

## ⚠️ 주의사항

- edit_file 도구 사용 시 전체 파일이 손상될 수 있음
- 백업 폴더(test-fixed)는 항상 최신 상태로 유지
- 수정 후 반드시 파일 내용 확인 필요

## 🔧 복구 명령어

파일이 비어졌을 때:
cp test-fixed/script.js test/

백업 생성:
cp test/script.js test/backup-$(date +%Y%m%d-%H%M%S).js

파일 내용 확인:
cat test/script.js | head -20
